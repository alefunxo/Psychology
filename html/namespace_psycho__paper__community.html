<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Psychology paper: Psycho_paper_community Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Psychology paper
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Psycho_paper_community Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Created on Wed Feb 28 09:47:22 2018 Author Alejandro Pena-Bello <a href="#" onclick="location.href='mai'+'lto:'+'ale'+'ja'+'ndr'+'o.'+'pen'+'ab'+'ell'+'o@'+'uni'+'ge'+'.ch'; return false;">aleja<span style="display: none;">.nosp@m.</span>ndro<span style="display: none;">.nosp@m.</span>.pena<span style="display: none;">.nosp@m.</span>bell<span style="display: none;">.nosp@m.</span>o@uni<span style="display: none;">.nosp@m.</span>ge.c<span style="display: none;">.nosp@m.</span>h</a> Script developed for the project developed together with the Consumer Decision and Sustainable Behavior Lab to include the user preferences in the charging and discharging of the battery.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a281baf6a407d30a22e485f5f76a62c3c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_psycho__paper__community.html#a281baf6a407d30a22e485f5f76a62c3c">find_interval</a> (x, partition)</td></tr>
<tr class="separator:a281baf6a407d30a22e485f5f76a62c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e0bea6729bebaf15916a97fbf15e5ee"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_psycho__paper__community.html#a3e0bea6729bebaf15916a97fbf15e5ee">sell_prob</a> (SOC, price, Capacity, case, path)</td></tr>
<tr class="separator:a3e0bea6729bebaf15916a97fbf15e5ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abefde718373bb160a718d8db9cd371b8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_psycho__paper__community.html#abefde718373bb160a718d8db9cd371b8">PV_SC</a> (df, Batt, Conv_eff, Inv_eff, endo)</td></tr>
<tr class="separator:abefde718373bb160a718d8db9cd371b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad44c65eda4460f8930299994447872ee"><td class="memItemLeft" align="right" valign="top"><a id="ad44c65eda4460f8930299994447872ee"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>PV_SC_probs2</b> (df, Batt, Conv_eff, Inv_eff, endo, path)</td></tr>
<tr class="separator:ad44c65eda4460f8930299994447872ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55c0842aa06303ca13fb7c4124534a18"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_psycho__paper__community.html#a55c0842aa06303ca13fb7c4124534a18">Price_definition</a> (prices, PV_penetration, Batt_penetration, reso, path, day_sel)</td></tr>
<tr class="separator:a55c0842aa06303ca13fb7c4124534a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40671524b3288de32169be3816854d27"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_psycho__paper__community.html#a40671524b3288de32169be3816854d27">community_psycho</a> (Batt_penetration, PV_penetration, reso, path, day_sel)</td></tr>
<tr class="separator:a40671524b3288de32169be3816854d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Created on Wed Feb 28 09:47:22 2018 Author Alejandro Pena-Bello <a href="#" onclick="location.href='mai'+'lto:'+'ale'+'ja'+'ndr'+'o.'+'pen'+'ab'+'ell'+'o@'+'uni'+'ge'+'.ch'; return false;">aleja<span style="display: none;">.nosp@m.</span>ndro<span style="display: none;">.nosp@m.</span>.pena<span style="display: none;">.nosp@m.</span>bell<span style="display: none;">.nosp@m.</span>o@uni<span style="display: none;">.nosp@m.</span>ge.c<span style="display: none;">.nosp@m.</span>h</a> Script developed for the project developed together with the Consumer Decision and Sustainable Behavior Lab to include the user preferences in the charging and discharging of the battery. </p>
<p>We use a deterministic approach and include probabilities to discharge the battery to the grid in the frame of a community with P2P energy trading. The script has been tested in Linux and Windows </p><h2>INPUTS </h2>
<p>Inputs are automatically saved in the 'Output' file </p><h2>OUTPUTS </h2>
<p>Outputs are automatically saved in the 'Output' file </p><h2>TODO </h2>
<p>User Interface </p><h2>Requirements </h2>
<p>Pandas, numpy, itertools,sys,glob,multiprocessing, timeimport pandas as pd </p><div class="image">
<img src="C:\Users\alejandro\Documents\GitHub\Psycho\Psycho_flowchart.jpg"/>
</div>
<p> DC-coupled PV-Battery system with integrated inverter used in this study. </p><div class="image">
<img src="C:\Users\alejandro\Documents\GitHub\Psycho\DC-coupled system (2).jpg"/>
</div>
 </div><h2 class="groupheader">Function Documentation</h2>
<a id="a40671524b3288de32169be3816854d27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40671524b3288de32169be3816854d27">&#9670;&nbsp;</a></span>community_psycho()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Psycho_paper_community.community_psycho </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Batt_penetration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>PV_penetration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>reso</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>day_sel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Description
-----------
This function calls the two functions PV_SC and PV_SC_probs2 to calculate the balance of the houses when they are individually operated and when they are in a community in order to have a comparison.
Three scenarios are analyzed.
    1. No community: when every house is connected directly to the grid and does not share within a community.
    2. Community No behaviour: when every house is in the community and there is only one physical connection to the grid. There is not consumer behaviour.
    3. Community behaviour: when every house is in the community and there is only one physical connection to the grid. Consumer behaviour is included.
For scenarios 1 and 2 PV_SC is used and then the data is processed differently.
For scenario 3 PV_SC_probs2 is used (includes consumer behaviour in the form of probability distributions)
In a first instance the prices are calculated using Price_definition function
'Output/community_{}_{}.csv'.format(PV_penetration,Batt_penetration))
'Output/no_community_{}_{}.csv'.format(PV_penetration,Batt_penetration))
Parameters
------
Batt_penetration: float; Battery penetration in the community
PV_penetration: float; PV penetration in the community
reso: float; resolution either 1h or 15 minutes
path:  string; path where the project is kept
day_sel: string; either winter, summer or other to simulate one day on winter, summer or all the year

Return
------
Gen_balance: float; Balance of generation must be zero
Batt_balance float; Balance of the battery must be zero
Demand_balance float; Balance of the demand must be zero
TODO
------</pre> 
</div>
</div>
<a id="a281baf6a407d30a22e485f5f76a62c3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281baf6a407d30a22e485f5f76a62c3c">&#9670;&nbsp;</a></span>find_interval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Psycho_paper_community.find_interval </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>partition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Description
-----------
find_interval at which x belongs inside partition. Returns the index i.

Parameters
------
x: float; numerical value
partition: array; sequence of numerical values
Returns
------
i: index; index for which applies
partition[i] &lt; x &lt; partition[i+1], if such an index exists.
-1 otherwise
TODO
------
</pre> 
</div>
</div>
<a id="a55c0842aa06303ca13fb7c4124534a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55c0842aa06303ca13fb7c4124534a18">&#9670;&nbsp;</a></span>Price_definition()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Psycho_paper_community.Price_definition </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>prices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>PV_penetration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Batt_penetration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>reso</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>day_sel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Takes the prices and PV_penetration as inputs, reads the df of generation in Munich and the PV_size_distribution,
and RANDOMLY chooses the sizes for the X houses (RANDOMLY selected) and produces an output at 15 min resolution that can be resampled @ 1h ir resample==True
</pre> 
</div>
</div>
<a id="abefde718373bb160a718d8db9cd371b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abefde718373bb160a718d8db9cd371b8">&#9670;&nbsp;</a></span>PV_SC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Psycho_paper_community.PV_SC </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>df</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Batt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Conv_eff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Inv_eff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>endo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Description
-----------
This function

Parameters
------
df: DataFrame;
Batt: Battery class; Battery characteristics
Conv_eff: float; Converter efficiency
Inv_eff: float; Inverter efficiency
endo: int; Defines the last element of the index we want to simulate
------
df: DataFrame;
TODO
------
Doc
</pre> 
</div>
</div>
<a id="a3e0bea6729bebaf15916a97fbf15e5ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e0bea6729bebaf15916a97fbf15e5ee">&#9670;&nbsp;</a></span>sell_prob()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def Psycho_paper_community.sell_prob </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>SOC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>price</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Capacity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>case</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Description
-----------
This function returns the selling probability based on the SOC, price, capacity and case. As well as the results of the survey which are stored as .txt
Parameters
------
SOC: float; Battery state of charge at time t
price: float; Electricity price at time t
Capacity: float; Battery capacity
case: string; either PV or batt from where the user is willing to sale
path: string; path where the .txt are found
------
out: int; Either 1 or 0 if sell or not
TODO
------
</pre> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
